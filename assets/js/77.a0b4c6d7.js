(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{266:function(t,s,a){"use strict";a.r(s);var n=a(3),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"chroot-환경-진입"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chroot-환경-진입"}},[t._v("#")]),t._v(" chroot 환경 진입")]),t._v(" "),a("p",[t._v("이제 시스템에 필요한 나머지 도구를 빌드하는 데 필요한 모든 패키지가 설치되었으므로, 이제 chroot 환경에 진입해서 남은 임시 도구를 설치할 시간입니다. 이 환경은 최종 시스템을 설치하는데도 사용됩니다. "),a("code",[t._v("root")]),t._v(" 유저로, 아래 명령아를 통해서 임시 도구로만 채워진 환경을 진입하십시오:")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chroot")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$LFS")]),t._v('"')]),t._v(" /usr/bin/env -i          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("HOME")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/root                         "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("TERM")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$TERM")]),t._v('"')]),t._v("                       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PS1")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'(lfs chroot) \\u:\\w\\$ '")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/bin:/usr/bin:/sbin:/usr/sbin "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    /bin/bash --login +h\n")])])]),a("p",[a("code",[t._v("env")]),t._v(" 명령에 지정된 "),a("code",[t._v("-i")]),t._v(" 옵션은 chroot 환경의 모든 변수를 지웁니다. 그 후에는 "),a("code",[t._v("HOME")]),t._v(", "),a("code",[t._v("TERM")]),t._v(", "),a("code",[t._v("PS1")]),t._v(" 및 "),a("code",[t._v("PATH")]),t._v(" 변수만 다시 설정됩니다. "),a("code",[t._v("TERM=$TERM")]),t._v(" 구문은 chroot 내부의 "),a("code",[t._v("TERM")]),t._v(" 변수를 chroot 밖과 동일한 값으로 설정합니다. "),a("code",[t._v("vim")]),t._v("이나 "),a("code",[t._v("less")]),t._v(" 등의 프로그램이 제대로 작동하려면 이 변수가 필요합니다. "),a("code",[t._v("CFLAGS")]),t._v(" 또는 "),a("code",[t._v("CXXFLAGS와")]),t._v(" 같은 다른 변수를 원하는 경우 이 변수를 다시 설정할 수 있습니다.")]),t._v(" "),a("p",[t._v("이 시점부터는 모든 작업이 LFS 파일 시스템으로 제한되므로 "),a("code",[t._v("LFS")]),t._v(" 변수를 더 이상 사용할 필요가 없습니다. 그 이유는 Bash 셸이 "),a("code",[t._v("$LFS")]),t._v("가 이제 루트("),a("code",[t._v("/")]),t._v(") 디렉토리라는 메시지를 받기 때문입니다.")]),t._v(" "),a("p",[a("code",[t._v("/tools/bin")]),t._v("이 "),a("code",[t._v("PATH")]),t._v('에 없습니다. 이는 크로스 툴 체인이 더 이상 chroot 환경에서 사용되지 않음을 의미합니다. 이 문제는 셸이 실행된 바이너리 파일의 위치를 "기억"하지 않을 때 발생합니다. 이 때문에 '),a("code",[t._v("+h")]),t._v(" 옵션을 "),a("code",[t._v("bash")]),t._v("로 전달하면 해시가 꺼집니다.")]),t._v(" "),a("p",[t._v("bash 프롬프트에 "),a("code",[t._v("I have no name!")]),t._v("이 표시됩니다. "),a("code",[t._v("/etc/passwd")]),t._v(" 파일이 아직 생성되지 않았기 때문에 정상입니다.")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("참고")]),t._v(" "),a("p",[t._v("이 장의 나머지와 이후의 모든 장은 chroot 환경 내부에서 진행됩니다. 재부팅 등 어떤 이유로든 이 환경을 나가게 된다면, 설치를 계속하기 전에 "),a("RouterLink",{attrs:{to:"/7/3.html"}},[t._v("7.3장 - 가상 커널 파일 시스템 마운트")]),t._v("에 설명된 대로 모든 가상 커널 파일 시스템을 마운트한 다음, chroot에 다시 진입하십시오.")],1)])])}),[],!1,null,null,null);s.default=e.exports}}]);